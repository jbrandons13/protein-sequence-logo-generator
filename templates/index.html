<!DOCTYPE html>
<html>
<head>
    <title>Sequence Logo Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" id="home" href="{{ url_for('index') }}">
                <i class="ri-home-2-line"></i>
            </a>
            <span>Sequence Logo Generator</span>
        </div>
    </nav>

    <!-- Content -->
    <div class="container mt-4">
        <h1 class="mb-3">Protein Sequence Logo Visualization</h1>
        <p>Instructions:</p>
        <ul>
            <li>Enter each sequence on a new line.</li>
            <li>Sequences must be in <strong>uppercase letters</strong>.</li>
            <li>Maximum number of sequences: <strong>16</strong></li>
            <li>Maximum sequence length: <strong>16</strong> amino acids</li>
        </ul>

        <form method="POST" action="/process" onsubmit="return validateForm();">
            <div class="mb-3">
                <label for="myFile" class="form-label">Upload a text file (optional):</label>
                <input type="file" id="myFile" class="form-control" onchange="loadFile(event)">
            </div>
            <div class="mb-3">
                <label for="myTextarea" class="form-label">Or enter sequences manually:</label>
                <textarea name="text" rows="16" id="myTextarea" class="form-control" placeholder="Enter your sequences here (uppercase letters only)" required></textarea>
            </div>
            <button type="submit" class="btn btn-outline-dark">Generate Logo</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load text file into textarea
        function loadFile(event) {
            const file = event.target.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById("myTextarea").value = e.target.result;
            };
            reader.readAsText(file);
        }

        // Hover effect for home icon
        const navbarBrand = document.getElementById("home");
        const icon = navbarBrand.querySelector("i");

        navbarBrand.addEventListener("mouseenter", () => {
            icon.classList.replace("ri-home-2-line", "ri-home-2-fill");
        });
        navbarBrand.addEventListener("mouseleave", () => {
            icon.classList.replace("ri-home-2-fill", "ri-home-2-line");
        });

        // Validate uppercase sequences
        function validateForm() {
            const textArea = document.getElementById("myTextarea");
            const val = textArea.value;
            if (val !== val.toUpperCase()) {
                alert("Please enter uppercase letters only.");
                return false;
            }
            return true;
        }
    </script>
</body>
</html>
